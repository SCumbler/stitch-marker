version: '3'

services:
  consul:
    image: consul
    command: "consul agent -dev -client 0.0.0.0"
    ports:
      - "8500:8500"
    logging:
      driver: "none"
    # networks:
    #  - stitch-marker-network

  web-app:
    image: jefferyb/polymer-cli
    command: "polymer serve -H 0.0.0.0"
    ports:
      - "8081:8081"
    volumes:
      - ./web-app/src:/home/polymer/app

  backend:
    image: backend
    build: ./backend/src/SM.Service
    volumes:
      - ./backend/src:/dotnetapp
    ports:
     - "5000:5000"
     - "12001:12001"
    depends_on:
     - "consul"
    # networks:
    #  - stitch-marker-network

# networks:
#   stitch-marker-network:
#     driver: bridge
